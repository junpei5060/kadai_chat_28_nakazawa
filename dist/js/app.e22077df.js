(function(t){function e(e){for(var o,a,r=e[0],c=e[1],u=e[2],d=0,m=[];d<r.length;d++)a=r[d],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&m.push(s[a][0]),s[a]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);l&&l(e);while(m.length)m.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],o=!0,r=1;r<n.length;r++){var c=n[r];0!==s[c]&&(o=!1)}o&&(i.splice(e--,1),t=a(a.s=n[0]))}return t}var o={},s={app:0},i=[];function a(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=o,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(n,o,function(e){return t[e]}.bind(null,o));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var u=0;u<r.length;u++)e(r[u]);var l=c;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"040f":function(t,e,n){},"04a1":function(t,e,n){},"094e":function(t,e,n){"use strict";var o=n("5ebc"),s=n.n(o);s.a},"0e23":function(t,e,n){"use strict";var o=n("427d"),s=n.n(o);s.a},"2bdc":function(t,e,n){},"32ca":function(t,e,n){},"427d":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("99af"),n("b0c0"),n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("body",[n("header",[t._m(0),n("nav",{staticClass:"pc-nav"},[n("ul",[n("li",[n("router-link",{attrs:{to:"/"}},[t._v("Home")])],1),n("li",[n("router-link",{attrs:{to:"/form"}},[t._v("新規作成")])],1),n("li",[n("span",{on:{click:t.logout}},[t._v("ログアウト")])])])])]),n("transition",{attrs:{mode:"”out-in”"}},[n("router-view")],1)],1)])},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h1",[n("a",{attrs:{href:"/"}},[t._v("Brain Storage")]),n("br")])}],a=n("59ca"),r=n.n(a),c=n("8c4f"),u=n("0a63"),l=n.n(u),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("home"),n("div",{staticClass:"memo-list container-fluent"},[n("div",{staticClass:"row justify-content-center d-flex justify-content-around"},t._l(t.memos,(function(t,e){return n("memo-list-card",{key:e,attrs:{memo:t}})})),1)])],1)},m=[],f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{container:""}},[n("body",[n("div",{staticClass:"home"},[n("h1",[t._v("Brain Storage CoLorFul")]),n("p",{staticClass:"subtitle"},[t._v("すべての記憶をここに保存しよう ")]),n("div",[n("router-link",{staticClass:"button",attrs:{to:"/form",type:"submit"},nativeOn:{click:function(e){return e.preventDefault(),t.addMemo(e)}}},[n("span",{staticClass:"add-text"},[t._v("Add")])])],1)]),n("router-link",{staticClass:"btn-circle-fishy",attrs:{to:"form"}},[t._v(" Add ")])],1)])},p=[],h={},v=h,b=(n("eaa4"),n("2877")),g=Object(b["a"])(v,f,p,!1,null,"c8c79052",null),_=g.exports,w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{container:""}},[n("div",{staticClass:"card"},[n("span",{staticClass:"masking-tape"}),n("div",[n("a",{staticClass:"button",on:{click:function(e){return t.remove(t.memo.id)}}},[n("span",[t._v("削除")])])]),n("div",{staticClass:"card-content"},[n("h1",{staticClass:"card-title"},[t._v(" "+t._s(t.formatedTitle))])]),n("p",{staticClass:"card-sub"},[t._v("詳細")]),n("span",{staticClass:"card-text"},[t._v(t._s(t.formatedDescription))])])])},C=[],y=(n("a4d3"),n("e01a"),{name:"MemoListCard",data:function(){return{releasedAtFromNow:this.getReleasedAtFromNow()}},mounted:function(){var t=this;window.setInterval((function(){t.releasedAtFromNow=t.getReleasedAtFromNow()}),6e4)},props:{memo:{type:Object,required:!0}},methods:{getReleasedAtFromNow:function(){return this.memo&&this.memo.releasedAt?this.$moment(this.memo.releasedAt).fromNow():""},getOmissionAndPlusMidpoint:function(t,e){return t.length<e?t:t.substr(0,e)+"…"},init:function(){this.$store.dispatch("memos/clear")},start:function(){this.$store.dispatch("memos/startListener")},stop:function(){this.$store.dispatch("memos/stopListener")},remove:function(t){confirm("データが完全に削除されますが、問題ないですか？絶対に他人のデータは削除しないでください")&&this.$store.dispatch("memos/deleteMemo",{id:t})}},computed:{formatedTitle:function(){return this.memo&&this.memo.title?this.getOmissionAndPlusMidpoint(this.memo.title,100):""},formatedDescription:function(){return this.memo&&this.memo.description?this.getOmissionAndPlusMidpoint(this.memo.description,500):""},memos:function(){return this.$store.getters["memos/data"]}}}),M=y,E=(n("0e23"),Object(b["a"])(M,w,C,!1,null,"e6d07e5c",null)),O=E.exports,A={name:"MemoList",components:{Home:_,"memo-list-card":O},data:function(){return{}},mounted:function(){this.init(),this.start()},destroyed:function(){this.stop()},methods:{init:function(){this.$store.dispatch("memos/clear")},start:function(){this.$store.dispatch("memos/startListener")},stop:function(){this.$store.dispatch("memos/stopListener")},remove:function(t){this.$store.dispatch("memos/deleteMemo",{id:t})}},computed:{memos:function(){return this.$store.getters["memos/data"]}}},x=A,$=(n("cb88"),Object(b["a"])(x,d,m,!1,null,"e6867794",null)),j=$.exports,k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"bg"}),n("div",{staticClass:"bg bg2"}),n("div",{staticClass:"bg bg3"}),n("div",{staticClass:"content"},[n("h1",{staticClass:"title"},[t._v("あなたの記憶装置をつくろう")]),n("h2",{staticClass:"sub"},[t._v("覚えた用語を追加しましょう")]),n("div",{staticClass:"cp_iptxt"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.memo.title,expression:"memo.title",modifiers:{trim:!0}}],staticClass:"ef",attrs:{type:"text",placeholder:"用語"},domProps:{value:t.memo.title},on:{input:function(e){e.target.composing||t.$set(t.memo,"title",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t._m(0)]),n("div",{staticClass:"cp_iptxt"},[n("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.memo.description,expression:"memo.description",modifiers:{trim:!0}}],staticClass:"ef",attrs:{type:"text",placeholder:"詳細"},domProps:{value:t.memo.description},on:{input:function(e){e.target.composing||t.$set(t.memo,"description",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),t._m(1)]),n("div",[n("router-link",{staticClass:"button",attrs:{to:"/thanks",type:"submit"},nativeOn:{click:function(e){return e.preventDefault(),t.addMemo(e)}}},[n("span",{staticClass:"add-text"},[t._v("Add")])])],1)])])},S=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"focus_line"},[n("i")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"focus_line"},[n("i")])}],L={ERROR_MEMO:{id:-1,title:"unknown",description:"unknown",platforms:[],million:!1,releasedAt:null},NEW_EMPTY_MEMO:function(){return{id:0,title:"",description:"",platforms:[],million:!1,releasedAt:null}},PLATFORMS:["FC","SFC","GB","64","GC","DS","Wii","3DS","Wii U","Switch"]},P={name:"MemoListForm",data:function(){return{memo:this.emptyMemo()}},methods:{addMemo:function(){this.memo.title&&this.memo.description&&(this.memo.platforms=[],this.memo.million=!1,this.memo.releasedAt=new Date,this.$store.dispatch("memos/addMemo",this.memo),this.memo=this.emptyMemo())},emptyMemo:function(){return L.NEW_EMPTY_MEMO()}},watch:{memo:function(t,e){console.log("new: %s, old: %s",JSON.stringify(t),JSON.stringify(e))}}},I=P,N=(n("d6bb"),Object(b["a"])(I,k,S,!1,null,"0d04877a",null)),B=N.exports,D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"bg"}),n("div",{staticClass:"bg bg2"}),n("div",{staticClass:"bg bg3"}),n("div",{staticClass:"content"},[t._m(0),n("div",[n("router-link",{staticClass:"button",attrs:{to:"/form"}},[n("span",{staticClass:"add-text"},[t._v("Add More")])])],1)])])},W=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h3",[t._v("Thank you! Become a GEEK that changes the world")])])}],T=(n("b79f"),{}),F=Object(b["a"])(T,D,W,!1,null,"251d2999",null),R=F.exports,U=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-12"},[n("h2",[t._v("ログイン画面")]),n("div",{staticClass:"mt-2"},[n("b-button",{attrs:{block:"",variant:"primary"},on:{click:t.googleLogin}},[t._v("Google ログイン")])],1),n("div",{staticClass:"mt-2"},[n("b-alert",{attrs:{dismissible:"",variant:"danger"},model:{value:t.showError,callback:function(e){t.showError=e},expression:"showError"}},[t._v(t._s(t.errorMessage))])],1)])])])},G=[],Y={name:"login",data:function(){return{email:"",password:"",errorMessage:"",showError:!1}},methods:{emailLogin:function(){var t=this;r.a.auth().signInWithEmailAndPassword(this.email,this.password).then((function(t){console.log(t),et.push("/success")})).catch((function(e){console.log(e),t.errorMessage=e.message,t.showError=!0}))},googleLogin:function(){var t=this,e=new r.a.auth.GoogleAuthProvider;r.a.auth().signInWithPopup(e).then((function(t){console.log(t.user),et.push("/success")})).catch((function(e){console.log(e),t.errorMessage=e.message,t.showError=!0}))}}},K=Y,z=(n("ed5d"),Object(b["a"])(K,U,G,!1,null,"25b7d2af",null)),J=z.exports,H=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-12"},[n("h2",[t._v("ログイン成功")]),n("div",{staticClass:"mt-4"},[n("b-button",{attrs:{block:"",variant:"primary"},on:{click:t.logout}},[t._v("ログアウト")])],1)])])])},q=[],Q={name:"success",methods:{logout:function(){r.a.auth().signOut().then((function(){et.push("/")})).catch((function(t){console.log(t.message),et.push("/")}))}}},V=Q,X=(n("cabc"),Object(b["a"])(V,H,q,!1,null,"36548a56",null)),Z=X.exports;o["default"].use(c["a"]),o["default"].use(l.a),o["default"].config.productionTip=!1;var tt=new c["a"]({mode:"history",routes:[{path:"/",name:"MemoList",component:j,meta:{title:"memo list"}},{path:"/form",component:B},{path:"/thanks",component:R},{path:"/login",name:"login",component:J},{path:"/success",redirect:"/",name:"success",component:Z},{path:"*",name:"login",component:J}]});tt.beforeResolve((function(t,e,n){console.log(t),"/login"==t.path?n():r.a.auth().onAuthStateChanged((function(t){t?(console.log("認証中"),n()):(console.log("未認証"),n({path:"/login"}))}))}));var et=tt,nt={name:"App",methods:{logout:function(){r.a.auth().signOut().then((function(){et.push("/")})).catch((function(t){console.log(t.message),et.push("/")}))}}},ot=nt,st=(n("094e"),Object(b["a"])(ot,s,i,!1,null,"0730d36a",null)),it=st.exports,at=n("2f62"),rt=(n("caad"),n("c975"),n("a434"),n("2532"),n("8aa5")),ct=n.n(rt),ut=(n("e71f"),{apiKey:"AIzaSyBEeYBWh1YLhmyWs7o3UriKowuGDBrN5WU",authDomain:"project-memo-17a70.firebaseapp.com",databaseURL:"https://project-memo-17a70.firebaseio.com",projectId:"project-memo-17a70",storageBucket:"project-memo-17a70.appspot.com",messagingSenderId:"774245133492",appId:"1:774245133492:web:8bc71c5e0f5825f95a7be1"}),lt=ct.a.initializeApp(ut,"exercise-vue"),dt=lt.firestore();dt.settings({timestampsInSnapshots:!0});var mt=dt,ft=mt.collection("memos"),pt={namespaced:!0,unsubscribe:null,state:function(){return{data:{}}},mutations:{set:function(t,e){t.data=e}},getters:{data:function(t){return t.data}},actions:{clear:function(t){var e=t.commit;e("set",L.NEW_EMPTY_MEMO())},startListener:function(t,e){var n=t.commit;this.unsubscribe&&(console.warn("listener is running. ",this.unsubscribe),this.unsubscribe(),this.unsubscribe=null),this.unsubscribe=ft.doc(e.id).onSnapshot((function(t){n("set",{id:t.id,title:t.data().title,description:t.data().description,platforms:t.data().platforms,million:t.data().million,releasedAt:new Date(1e3*t.data().releasedAt.seconds)})}))},stopListener:function(){this.unsubscribe&&(console.log("listener is stopping. ",this.unsubscribe),this.unsubscribe(),this.unsubscribe=null)},updateMillion:function(t){var e=t.state,n=!e.data.million;ft.doc(e.data.id).update({million:n}).then((function(){})).catch((function(t){console.error("Error updating document: ",t)}))},updatePlatforms:function(t,e){var n=t.state,o=[].concat(n.data.platforms);o.includes(e.platform)?o.splice(o.indexOf(e.platform),1):o.push(e.platform),ft.doc(n.data.id).update({platforms:o}).then((function(){})).catch((function(t){console.error("Error updating document: ",t)}))}}},ht=(n("c740"),n("4160"),n("159b"),mt.collection("memos")),vt={namespaced:!0,unsubscribe:null,state:function(){return{data:[]}},mutations:{init:function(t,e){t.data=e},add:function(t,e){t.data.push(e)},set:function(t,e){var n=t.data.findIndex((function(t){return t.id===e.id}));-1!==n&&(t.data[n]=e)},remove:function(t,e){var n=t.data.findIndex((function(t){return t.id===e.id}));-1!==n&&t.data.splice(n,1)}},getters:{data:function(t){return t.data}},actions:{clear:function(t){var e=t.commit;e("init",[])},startListener:function(t){var e=t.commit;this.unsubscribe&&(console.warn("listener is running. ",this.unsubscribe),this.unsubscribe(),this.unsubscribe=null),this.unsubscribe=ht.orderBy("releasedAt","asc").onSnapshot((function(t){t.docChanges().forEach((function(t){var n={id:t.doc.id,title:t.doc.data().title,description:t.doc.data().description,platforms:t.doc.data().platforms,million:t.doc.data().million,releasedAt:new Date(1e3*t.doc.data().releasedAt.seconds)};"added"===t.type?e("add",n):"modified"===t.type?e("set",n):"removed"===t.type&&e("remove",n)}))}),(function(t){console.error(t.name)}))},stopListener:function(){this.unsubscribe&&(console.log("listener is stopping. ",this.unsubscribe),this.unsubscribe(),this.unsubscribe=null)},addMemo:function(t,e){t.commit;ht.add(e).then((function(t){})).catch((function(t){console.error("Error adding document: ",t)}))},deleteMemo:function(t,e){t.commit;ht.doc(e.id).delete().then((function(){})).catch((function(t){console.error("Error removing document: ",t)}))}}};o["default"].use(at["a"]);var bt=new at["a"].Store({modules:{memo:pt,memos:vt},strict:!1}),gt=bt,_t=n("7ba4"),wt=n.n(_t),Ct=n("2ead"),yt=n.n(Ct),Mt=n("5f5b");n("f9e3"),n("2dd8"),n("ea7b");o["default"].config.productionTip=!1,o["default"].use(wt.a),o["default"].use(yt.a),o["default"].use(Mt["a"]);var Et={apiKey:"AIzaSyBEeYBWh1YLhmyWs7o3UriKowuGDBrN5WU",authDomain:"project-memo-17a70.firebaseapp.com",databaseURL:"https://project-memo-17a70.firebaseio.com",projectId:"project-memo-17a70",storageBucket:"project-memo-17a70.appspot.com",messagingSenderId:"774245133492",appId:"1:774245133492:web:8bc71c5e0f5825f95a7be1"};r.a.initializeApp(Et),o["default"].mixin({methods:{},computed:{routeInfo:{get:function(){return"".concat(this.$route.name," : ").concat(this.$route.path)}}}}),new o["default"]({router:et,store:gt,Inview:wt.a,components:{App:it},template:"<App/>",render:function(t){return t(it)}}).$mount("#app")},"5ebc":function(t,e,n){},b79f:function(t,e,n){"use strict";var o=n("2bdc"),s=n.n(o);s.a},cabc:function(t,e,n){"use strict";var o=n("32ca"),s=n.n(o);s.a},cb88:function(t,e,n){"use strict";var o=n("d025"),s=n.n(o);s.a},d025:function(t,e,n){},d6bb:function(t,e,n){"use strict";var o=n("f6d4"),s=n.n(o);s.a},eaa4:function(t,e,n){"use strict";var o=n("04a1"),s=n.n(o);s.a},ed5d:function(t,e,n){"use strict";var o=n("040f"),s=n.n(o);s.a},f6d4:function(t,e,n){}});
//# sourceMappingURL=app.e22077df.js.map